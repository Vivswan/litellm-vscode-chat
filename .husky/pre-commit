#!/bin/sh

# Ensure dependencies are installed
bun install

# Run formatting on staged files
bunx lint-staged

# Check formatting for all files
bunx prettier --write .

# Check if any files were modified by formatting
if ! git diff --exit-code; then
	echo ""
	echo "‚ùå Formatting changes detected!"
	echo "Files were modified by prettier. Please review and stage the changes, then commit again."
	exit 1
fi

# Run linting
bun run lint

# Run tests
bun run test
